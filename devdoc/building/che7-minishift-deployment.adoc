= Deploying Che 7 to Minishift 1.34+

== Prerequisites

You need the latest link:https://github.com/minishift/minishift/releases[Minishift] and link:https://github.com/che-incubator/chectl/releases[chectl] releases.

Fetch them like this (or similar):

```
cd ~/bin
curl -sSL  https://github.com/che-incubator/chectl/releases/download/20190628062929/chectl-linux -o chectl
chmod +x chectl
```

```
cd /tmp
curl -sSL https://github.com/minishift/minishift/releases/download/v1.34.0/minishift-1.34.0-linux-amd64.tgz -o minishift.tgz
tar xvzf minishift.tgz
mv minishift*/minishift ~/bin/
chmod +x ~/bin/minishift
```

== Procedure


. Start up minishift.
+
```
minishift
```

. Log in once startup is complete.
+
```
oc login 192.168.MY.IP:8433 -u system -p admin
```

. To watch the events and see which images are pulled, see link:che7-minishift-images.adoc[this document].

. Deploy Che to minishift:
+
```
chectl server:start -a minishift-addon -p minishift
```

. Fix the plugin registry URL to use the latest version:
+
```
oc set env dc/che CHE_WORKSPACE_PLUGIN__REGISTRY__URL=https://che-plugin-registry.openshift.io/v3
```
+
[NOTE]
====
You can open the console for the che deployment to verify your change has been applied:

* https://192.168.YOUR.IP:8443/console/project/che/edit/dc/che

You should see:

```
CHE_WORKSPACE_PLUGIN__REGISTRY__URL = https://che-plugin-registry.openshift.io/v3
```
====

. Wait for redeployment to complete.

. Once running, you can see your Che instance here:
+
* http://che-che.192.168.YOUR.IP.nip.io/

. If you then add a new workspace, you can see even more images pulled in the openshift link:che7-minishift-images.adoc[event log].
